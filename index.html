<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Employment Job Application</title>
<style>
  body { font-family: Arial, sans-serif; background:#f5f6fa; margin:0; padding:20px; }
  #applicationContainer { max-width:800px; margin:auto; background:#fff; padding:30px 40px; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1); }
  h1 { text-align:center; text-transform:uppercase; margin-bottom:30px; }
  .section { background:#d9e3f0; padding:8px; font-weight:bold; text-transform:uppercase; margin-top:25px; border-radius:4px; }
  label { display:block; margin-top:12px; font-weight:bold; }
  input { width:100%; padding:6px; border:none; border-bottom:1px solid #333; outline:none; font-size:15px; }
  button { margin-top:25px; display:block; width:100%; background-color:#4a6cf7; color:white; border:none; padding:12px; font-size:16px; border-radius:6px; cursor:pointer; }
  button:hover { background-color:#3856c8; }
  #resultSection { text-align:center; margin-top:25px; display:none; }
</style>
</head>
<body>

<div id="applicationContainer">
  <h1>Employment Job Application</h1>

  <div id="formSection">
    <div class="section">Personal Information</div>
    <label>Full Name</label>
    <input type="text" id="fullName" required>
    <label>Email</label>
    <input type="email" id="email" required>
    <label>Phone</label>
    <input type="tel" id="phone" required>
    <label>Address</label>
    <input type="text" id="address" required>

    <div class="section">Employment Eligibility</div>
    <label>Position Applied For</label>
    <input type="text" id="position" required>
    <label>Start Date</label>
    <input type="date" id="startDate" required>
    <label>Are you legally eligible to work?</label>
    <input type="text" id="eligible" placeholder="Yes / No" required>

    <div class="section">Education</div>
    <label>Highest Level Completed</label>
    <input type="text" id="education" required>
    <label>School Name</label>
    <input type="text" id="school" required>

    <button onclick="submitForm()">Submit Application</button>
  </div>

  <div id="resultSection">
    <div id="statusBox"></div>
    <button id="downloadBtn" style="display:none; background:#27ae60;">Download Application</button>
  </div>
</div>

<!-- EmailJS SDK -->
<script src="https://cdn.emailjs.com/dist/email.min.js"></script>
<script>
  (function(){ emailjs.init("hoBvs6-c-UoUDwVhh"); })(); // <-- REPLACE with your EmailJS Public Key
</script>

<script>
function submitForm() {
  const resultSection = document.getElementById("resultSection");
  const statusBox = document.getElementById("statusBox");
  const downloadBtn = document.getElementById("downloadBtn");
  resultSection.style.display = "block";

  const success = Math.random() >= 0.4;

  if(success){
    statusBox.innerHTML = `<div style="width:60px;height:60px;margin:auto;border-radius:50%;background:#27ae60;display:flex;align-items:center;justify-content:center;font-size:30px;color:white;">✔</div>
                           <p style="color:#27ae60;font-weight:bold;">Form submitted successfully!</p>`;
  } else {
    statusBox.innerHTML = `<div style="width:60px;height:60px;margin:auto;border-radius:50%;background:#e74c3c;display:flex;align-items:center;justify-content:center;font-size:30px;color:white;">✖</div>
                           <p style="color:#e74c3c;font-weight:bold;">Form failed to submit.</p>`;
  }

  const formData = {
    fullName: document.getElementById("fullName").value,
    email: document.getElementById("email").value,
    phone: document.getElementById("phone").value,
    address: document.getElementById("address").value,
    position: document.getElementById("position").value,
    startDate: document.getElementById("startDate").value,
    eligible: document.getElementById("eligible").value,
    education: document.getElementById("education").value,
    school: document.getElementById("school").value
  };

  document.getElementById("formSection").style.display = "none";

  downloadBtn.style.display = "inline-block";
  downloadBtn.onclick = function(){
    let content = "";
    for(let key in formData){
      content += `${key}: ${formData[key]}\n`;
    }
    const blob = new Blob([content], {type:"text/plain"});
    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = "Job_Application.txt";
    link.click();
  };

  const templateParams = {...formData};

  emailjs.send('service_de6sh1a','template_dgbi8xs',templateParams)
    .then(function(response){
      console.log('Email sent!', response.status, response.text);
    }, function(error){
      console.log('Email failed...', error);
    });
}
</script>
</body>
</html>
